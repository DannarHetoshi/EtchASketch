<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://dannarhetoshi.github.io/DH-HolyGrail/home/DH-HolyGrail.css">
    <link rel="stylesheet" href="./style.css">
    <title>DH -Etch A Sketch</title>
</head>

<body class="DH-HG-body">
    <header class="DH-HG-header">
      <h3>Press the Button</h3>
      <label class="createDiv" id="lblNumDivs">How many grid rows?</label>
      <input class="createDiv" id="numOfDivs"></input>
      <button class="btn createDiv">Create a new div</button>
    </header>
    <div class="DH-container" id="DH-container">

    </div>
    
    <script>
let divCount = 1;               


const btn = document.querySelector('button');
function createDiv(e) {
//console.log(e);
const divCount1 = document.querySelector('#numOfDivs');
let numDiv = (divCount1.value)*(divCount1.value);
const maxWidth = (1 / divCount1.value)*100;
divCount = divCount + 1;    
const container = document.querySelector("#DH-container");
container.innerHTML = '';
for (i = 1; i <= numDiv; i++) {
    const container = document.querySelector("#DH-container");
    const content = document.createElement('div');
    //console.log(i);
    content.classList.add('content');
    content.addEventListener('mouseover',changeColor);
    content.setAttribute('id', 'div' + i);
    content.setAttribute('style', 'order: ' + i + '; width: '+maxWidth+'%;');
    content.textContent = '';
    container.appendChild(content);
}
}

/*function changeColor(e) {
this.target.style.color = random_rgb();
}*/

function random_rgb(){
    var o = Math.round, r = Math.random, s = 255;
    return 'rgba('+o(r()*s) + ',' + o(r()*s) + ',' + o(r()*s);
}

btn.addEventListener('click', createDiv);
    
function changeColor(e) {
    const divX = document.getElementById(e);
    
    e.target.style.backgroundColor = random_rgb();
} 

var hovEvent = document.querySelectorAll('div');
for (let i=0;i<hovEvent.length;i++) {
    hovEvent[i].addEventListener('click', changeColor, false);
}
    </script>

</body>
</html>